<?php return array (
  'preserve_keys' => true,
  'update_object' => true,
  'vehicle_package' => 'transport',
  'vehicle_class' => 'xPDOObjectVehicle',
  'guid' => '6249dd0cdfc6394179f04fbb4200d132',
  'package' => 'modx',
  'class' => 'modSnippet',
  'signature' => '825f7a74a2743ef45c2d22938cedf8bb',
  'native_key' => 48,
  'object' => '{"id":48,"source":1,"property_preprocess":0,"name":"adminLogin","description":"","editor_type":0,"category":12,"cache_type":0,"snippet":"$path = $modx->getOption(\'admintools_core_path\', null, $modx->getOption(\'core_path\') . \'components\\/admintools\\/\').\'model\\/admintools\\/\';\\r\\n\\/** @var AdminTools $AdminTools *\\/\\r\\n$AdminTools = $modx->getService(\'admintools\',\'AdminTools\',$path, $scriptProperties);\\r\\nif (isset($_SERVER[\'HTTP_X_REQUESTED_WITH\']) && $_SERVER[\'HTTP_X_REQUESTED_WITH\'] == \'XMLHttpRequest\') {\\r\\n    $get = $modx->sanitize($_GET, $modx->sanitizePatterns);\\r\\n    $get = array_map(\'trim\',$get);\\r\\n    $success = true;\\r\\n    $message = $modx->lexicon(\'admintools_link_is_sent\');\\r\\n    if (empty($get[\'action\']) || $get[\'action\'] != \'login\') {\\r\\n        $message = \'Access is denied\';\\r\\n        $success = false;\\r\\n    } elseif (empty($get[\'userdata\'])) {\\r\\n        $message =  $modx->lexicon(\'admintools_enter_username_or_email\');\\r\\n        $success = false;\\r\\n    }\\r\\n    if ($success) {\\r\\n        if ($msg = $AdminTools->sendLoginLink($get)){\\r\\n            $success = false;\\r\\n            $message = $msg;\\r\\n        };\\r\\n    }\\r\\n    $response = array(\'success\'=>$success, \'message\'=>$message);\\r\\n    exit($modx->toJSON($response));\\r\\n} else {\\r\\n    if ($modx->user->isAuthenticated(\'mgr\')) {\\r\\n        $url = $modx->getOption(\'manager_url\', null, MODX_MANAGER_URL);\\r\\n        $url = $modx->getOption(\'url_scheme\', null, MODX_URL_SCHEME) . $modx->getOption(\'http_host\', null, MODX_HTTP_HOST) . rtrim($url, \'\\/\');\\r\\n        $modx->sendRedirect($url);\\r\\n    }\\r\\n    $errormsg = \'\';\\r\\n    if (isset($_GET[\'a\']) && isset($_GET[\'hash\']) && isset($_GET[\'id\'])) {\\r\\n        $get = $modx->sanitize($_GET, $modx->sanitizePatterns);\\r\\n        $data = $AdminTools->getLoginState($get[\'id\']);\\r\\n        if (!empty($data) && $get[\'hash\'] == $data[\'hash\'] && !empty($data[\'uid\'])) {\\r\\n            $key = md5($_SERVER[\'REMOTE_ADDR\'] . \'\\/\' . $_SERVER[\'HTTP_USER_AGENT\'] . $data[\'uid\']);\\r\\n            if ($key == $get[\'id\']) {\\r\\n                $errormsg = $AdminTools->loginUser($data[\'uid\']);\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n    \\/** @var array $scriptProperties *\\/\\r\\n    $assetsUrl = $AdminTools->getOption(\'assetsUrl\');\\r\\n    $modx->regClientCss($assetsUrl . \'css\\/mgr\\/login.css\');\\r\\n    $modx->regClientScript($assetsUrl . \'js\\/mgr\\/login.js\');\\r\\n    return $modx->getChunk($tpl,array(\'errormsg\'=>$errormsg));\\r\\n}","locked":0,"properties":"a:1:{s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:19:\\"admintools_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:14:\\"tpl.login.form\\";s:7:\\"lexicon\\";s:21:\\"admintools:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/admintools\\/elements\\/snippets\\/snippet.adminlogin.php","content":"$path = $modx->getOption(\'admintools_core_path\', null, $modx->getOption(\'core_path\') . \'components\\/admintools\\/\').\'model\\/admintools\\/\';\\r\\n\\/** @var AdminTools $AdminTools *\\/\\r\\n$AdminTools = $modx->getService(\'admintools\',\'AdminTools\',$path, $scriptProperties);\\r\\nif (isset($_SERVER[\'HTTP_X_REQUESTED_WITH\']) && $_SERVER[\'HTTP_X_REQUESTED_WITH\'] == \'XMLHttpRequest\') {\\r\\n    $get = $modx->sanitize($_GET, $modx->sanitizePatterns);\\r\\n    $get = array_map(\'trim\',$get);\\r\\n    $success = true;\\r\\n    $message = $modx->lexicon(\'admintools_link_is_sent\');\\r\\n    if (empty($get[\'action\']) || $get[\'action\'] != \'login\') {\\r\\n        $message = \'Access is denied\';\\r\\n        $success = false;\\r\\n    } elseif (empty($get[\'userdata\'])) {\\r\\n        $message =  $modx->lexicon(\'admintools_enter_username_or_email\');\\r\\n        $success = false;\\r\\n    }\\r\\n    if ($success) {\\r\\n        if ($msg = $AdminTools->sendLoginLink($get)){\\r\\n            $success = false;\\r\\n            $message = $msg;\\r\\n        };\\r\\n    }\\r\\n    $response = array(\'success\'=>$success, \'message\'=>$message);\\r\\n    exit($modx->toJSON($response));\\r\\n} else {\\r\\n    if ($modx->user->isAuthenticated(\'mgr\')) {\\r\\n        $url = $modx->getOption(\'manager_url\', null, MODX_MANAGER_URL);\\r\\n        $url = $modx->getOption(\'url_scheme\', null, MODX_URL_SCHEME) . $modx->getOption(\'http_host\', null, MODX_HTTP_HOST) . rtrim($url, \'\\/\');\\r\\n        $modx->sendRedirect($url);\\r\\n    }\\r\\n    $errormsg = \'\';\\r\\n    if (isset($_GET[\'a\']) && isset($_GET[\'hash\']) && isset($_GET[\'id\'])) {\\r\\n        $get = $modx->sanitize($_GET, $modx->sanitizePatterns);\\r\\n        $data = $AdminTools->getLoginState($get[\'id\']);\\r\\n        if (!empty($data) && $get[\'hash\'] == $data[\'hash\'] && !empty($data[\'uid\'])) {\\r\\n            $key = md5($_SERVER[\'REMOTE_ADDR\'] . \'\\/\' . $_SERVER[\'HTTP_USER_AGENT\'] . $data[\'uid\']);\\r\\n            if ($key == $get[\'id\']) {\\r\\n                $errormsg = $AdminTools->loginUser($data[\'uid\']);\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n    \\/** @var array $scriptProperties *\\/\\r\\n    $assetsUrl = $AdminTools->getOption(\'assetsUrl\');\\r\\n    $modx->regClientCss($assetsUrl . \'css\\/mgr\\/login.css\');\\r\\n    $modx->regClientScript($assetsUrl . \'js\\/mgr\\/login.js\');\\r\\n    return $modx->getChunk($tpl,array(\'errormsg\'=>$errormsg));\\r\\n}"}',
);