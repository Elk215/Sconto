<?php return array (
  'preserve_keys' => true,
  'update_object' => true,
  'vehicle_package' => 'transport',
  'vehicle_class' => 'xPDOObjectVehicle',
  'guid' => '7f661304b69f4fd9d2b676d911de265c',
  'package' => 'modx',
  'class' => 'modPlugin',
  'signature' => 'ae36cbf0e6705695fe0e6a1491a328a9',
  'native_key' => 12,
  'object' => '{"id":12,"source":1,"property_preprocess":0,"name":"AdminTools","description":"","editor_type":0,"category":12,"cache_type":0,"plugincode":"\\/** @var array $scriptProperties *\\/\\n$path = $modx->getOption(\'admintools_core_path\', null, $modx->getOption(\'core_path\') . \'components\\/admintools\\/\').\'model\\/admintools\\/\';\\n\\/** @var AdminTools $AdminTools *\\/\\n$AdminTools = $modx->getService(\'admintools\',\'AdminTools\',$path);\\n$elementType = null;\\nif ($AdminTools instanceof AdminTools) {\\n    switch ($modx->event->name) {\\n        case \'OnManagerPageBeforeRender\':\\n            if ($modx->user->id) $AdminTools->initialize();\\n            break;\\n        case \'OnDocFormSave\':\\n            if ($modx->getOption(\'admintools_clear_only_resource_cache\',null,false)) {\\n                if ($modx->event->params[\'mode\'] != \'upd\') {\\n                    return;\\n                }\\n                if ($resource->get(\'syncsite\')) {\\n                    $AdminTools->clearResourceCache($resource);\\n                }\\n                if (!empty($_POST[\'createCache\'])) {\\n                    $AdminTools->createResourceCache($resource->uri);\\n                }\\n            }\\n            break;\\n        case \'OnManagerPageInit\':\\n            if (!$modx->user->isAuthenticated(\'mgr\') && $modx->getOption(\'admintools_email_authorization\', null, false)) {\\n                $id = (int) $modx->getOption(\'admintools_loginform_resource\');\\n                if (!empty($id) && $modx->getCount(\'modResource\', array(\'id\'=>$id, \'published\'=>1, \'deleted\'=>0))) {\\n                    $url = $modx->makeUrl($id,\'\',\'\',\'full\');\\n                    $modx->setOption(\'manager_login_url_alternate\', $url);\\n                }\\n            }\\n            break;\\n        case \'OnManagerAuthentication\':\\n            if ($modx->getOption(\'admintools_user_can_login\', null, false)) {\\n                $modx->setOption(\'admintools_user_can_login\', false);\\n                $modx->event->output(true);\\n            }\\n            break;\\n        case \'OnLoadWebDocument\':\\n            if ($modx->user->isAuthenticated($modx->context->get(\'key\')) && (!$modx->user->active || $modx->user->Profile->blocked)) {\\n                $modx->runProcessor(\'security\\/logout\');\\n            }\\n            if ($modx->getOption(\'admintools_alternative_permissions\', null, false) && !$AdminTools->hasPermissions()){\\n                $modx->sendUnauthorizedPage();\\n            }\\n            break;\\n        case \'OnTempFormPrerender\':\\n            if ($modx->getOption(\'admintools_template_resource_relationship\', null, true)) {\\n                $modx->controller->addLastJavascript($AdminTools->getOption(\'jsUrl\') . \'mgr\\/templates.js\');\\n            }\\n            break;\\n        case \'OnDocFormPrerender\':\\n            $_html = array();\\n            if ($modx->getOption(\'admintools_template_resource_relationship\', null, true)) {\\n                $_html[\'tpl_res_relationship\'] = \'\\n            var tmpl = Ext.getCmp(\\"modx-resource-template\\");\\n            if (tmpl.getValue()) tmpl.label.update(_(\\"resource_template\\") + \\"&nbsp;&nbsp;<a href=\\\\\\"?a=element\\/template\\/update&id=\\" + tmpl.getValue() + \\"\\\\\\"><i class=\\\\\\"icon icon-external-link\\\\\\"><\\/i><\\/a>\\");\';\\n            }\\n            if ($modx->getOption(\'admintools_clear_only_resource_cache\', null, true) && $resource instanceof modResource) {\\n                $_html[\'create_resource_cache\'] = \'\\n            var cb = Ext.create({\\n                xtype: \\"xcheckbox\\",\\n                boxLabel: _(\\"admintools_create_resource_cache\\"),\\n                description: _(\\"admintools_create_resource_cache_help\\"),\\n                hideLabel: true,\\n                name: \\"createCache\\",\\n                id: \\"createCache\\",\\n                checked: \'. intval($modx->getOption(\'admintools_create_resource_cache\', null, false)) .\'\\n            });\\n            if (Ext.getCmp(\\"modx-page-settings-right-box-right\\")) {\\n                Ext.getCmp(\\"modx-page-settings-right-box-right\\").insert(2,cb);\\n                Ext.getCmp(\\"modx-page-settings-right-box-left\\").add(Ext.getCmp(\\"modx-resource-uri-override\\"));\\n                Ext.getCmp(\\"modx-panel-resource\\").on(\\"success\\", function(o){\\n                    if (o.result.object.createCache != 0) {\\n                        cb.setValue(true);\\n                    }\\n                });\\n            }\';\\n            }\\n            $output = \'\';\\n            if (!empty($_html)) {\\n            $output .= \'\\n    Ext.onReady(function() {\\n        setTimeout(function(){\' . implode(\\"\\\\n\\", $_html) . \'\\n        }, 200);\\n    });\';\\n            }\\n            if ($modx->getOption(\'admintools_alternative_permissions\', null, true) && $modx->hasPermission(\'access_permissions\')) {\\n                $modx->controller->addLastJavascript($AdminTools->getOption(\'jsUrl\') . \'mgr\\/permissions.js\');\\n                $output .= \'\\n    Ext.ComponentMgr.onAvailable(\\"modx-resource-tabs\\", function() {\\n\\t\\tthis.on(\\"beforerender\\", function() {\\n\\t\\t\\tthis.add({\\n\\t\\t\\t\\ttitle: _(\\"admintools_permissions\\"),\\n\\t\\t\\t\\tborder: false,\\n\\t\\t\\t\\titems: [{\\n\\t\\t\\t\\t\\tlayout: \\"anchor\\",\\n\\t\\t\\t\\t\\tborder: false,\\n\\t\\t\\t\\t\\titems: [{\\n\\t\\t\\t\\t\\t\\thtml: _(\\"admintools_permissions_desc\\"),\\n\\t\\t\\t\\t\\t\\tborder: false,\\n\\t\\t\\t\\t\\t\\tbodyCssClass: \\"panel-desc\\"\\n\\t\\t\\t\\t\\t}, {\\n\\t\\t\\t\\t\\t\\txtype: \\"admintools-grid-permissions\\",\\n\\t\\t\\t\\t\\t\\tanchor: \\"100%\\",\\n\\t\\t\\t\\t\\t\\tcls: \\"main-wrapper\\",\\n\\t\\t\\t\\t\\t\\tresource: \' . $id . \'\\n\\t\\t\\t\\t\\t}]\\n\\t\\t\\t\\t}]\\n\\t\\t\\t});\\n\\t\\t});\\n\\t});\\n\';\\n            }\\n            if (!empty($output)) $modx->controller->addHtml(\'<script type=\\"text\\/javascript\\">\' . $output . \'<\\/script>\');\\n            break;\\n        \\/*case \'OnWebPagePrerender\':\\n            $output = &$modx->resource->_output;\\n            $replace = \\"\\";\\n            preg_replace(\'\\/<\\/script>\\/\', $replace, $output, 1);\\n            break;*\\/\\n    }\\n}","locked":0,"properties":null,"disabled":0,"moduleguid":"","static":0,"static_file":"core\\/components\\/admintools\\/elements\\/plugins\\/plugin.admintools.php","content":"\\/** @var array $scriptProperties *\\/\\n$path = $modx->getOption(\'admintools_core_path\', null, $modx->getOption(\'core_path\') . \'components\\/admintools\\/\').\'model\\/admintools\\/\';\\n\\/** @var AdminTools $AdminTools *\\/\\n$AdminTools = $modx->getService(\'admintools\',\'AdminTools\',$path);\\n$elementType = null;\\nif ($AdminTools instanceof AdminTools) {\\n    switch ($modx->event->name) {\\n        case \'OnManagerPageBeforeRender\':\\n            if ($modx->user->id) $AdminTools->initialize();\\n            break;\\n        case \'OnDocFormSave\':\\n            if ($modx->getOption(\'admintools_clear_only_resource_cache\',null,false)) {\\n                if ($modx->event->params[\'mode\'] != \'upd\') {\\n                    return;\\n                }\\n                if ($resource->get(\'syncsite\')) {\\n                    $AdminTools->clearResourceCache($resource);\\n                }\\n                if (!empty($_POST[\'createCache\'])) {\\n                    $AdminTools->createResourceCache($resource->uri);\\n                }\\n            }\\n            break;\\n        case \'OnManagerPageInit\':\\n            if (!$modx->user->isAuthenticated(\'mgr\') && $modx->getOption(\'admintools_email_authorization\', null, false)) {\\n                $id = (int) $modx->getOption(\'admintools_loginform_resource\');\\n                if (!empty($id) && $modx->getCount(\'modResource\', array(\'id\'=>$id, \'published\'=>1, \'deleted\'=>0))) {\\n                    $url = $modx->makeUrl($id,\'\',\'\',\'full\');\\n                    $modx->setOption(\'manager_login_url_alternate\', $url);\\n                }\\n            }\\n            break;\\n        case \'OnManagerAuthentication\':\\n            if ($modx->getOption(\'admintools_user_can_login\', null, false)) {\\n                $modx->setOption(\'admintools_user_can_login\', false);\\n                $modx->event->output(true);\\n            }\\n            break;\\n        case \'OnLoadWebDocument\':\\n            if ($modx->user->isAuthenticated($modx->context->get(\'key\')) && (!$modx->user->active || $modx->user->Profile->blocked)) {\\n                $modx->runProcessor(\'security\\/logout\');\\n            }\\n            if ($modx->getOption(\'admintools_alternative_permissions\', null, false) && !$AdminTools->hasPermissions()){\\n                $modx->sendUnauthorizedPage();\\n            }\\n            break;\\n        case \'OnTempFormPrerender\':\\n            if ($modx->getOption(\'admintools_template_resource_relationship\', null, true)) {\\n                $modx->controller->addLastJavascript($AdminTools->getOption(\'jsUrl\') . \'mgr\\/templates.js\');\\n            }\\n            break;\\n        case \'OnDocFormPrerender\':\\n            $_html = array();\\n            if ($modx->getOption(\'admintools_template_resource_relationship\', null, true)) {\\n                $_html[\'tpl_res_relationship\'] = \'\\n            var tmpl = Ext.getCmp(\\"modx-resource-template\\");\\n            if (tmpl.getValue()) tmpl.label.update(_(\\"resource_template\\") + \\"&nbsp;&nbsp;<a href=\\\\\\"?a=element\\/template\\/update&id=\\" + tmpl.getValue() + \\"\\\\\\"><i class=\\\\\\"icon icon-external-link\\\\\\"><\\/i><\\/a>\\");\';\\n            }\\n            if ($modx->getOption(\'admintools_clear_only_resource_cache\', null, true) && $resource instanceof modResource) {\\n                $_html[\'create_resource_cache\'] = \'\\n            var cb = Ext.create({\\n                xtype: \\"xcheckbox\\",\\n                boxLabel: _(\\"admintools_create_resource_cache\\"),\\n                description: _(\\"admintools_create_resource_cache_help\\"),\\n                hideLabel: true,\\n                name: \\"createCache\\",\\n                id: \\"createCache\\",\\n                checked: \'. intval($modx->getOption(\'admintools_create_resource_cache\', null, false)) .\'\\n            });\\n            if (Ext.getCmp(\\"modx-page-settings-right-box-right\\")) {\\n                Ext.getCmp(\\"modx-page-settings-right-box-right\\").insert(2,cb);\\n                Ext.getCmp(\\"modx-page-settings-right-box-left\\").add(Ext.getCmp(\\"modx-resource-uri-override\\"));\\n                Ext.getCmp(\\"modx-panel-resource\\").on(\\"success\\", function(o){\\n                    if (o.result.object.createCache != 0) {\\n                        cb.setValue(true);\\n                    }\\n                });\\n            }\';\\n            }\\n            $output = \'\';\\n            if (!empty($_html)) {\\n            $output .= \'\\n    Ext.onReady(function() {\\n        setTimeout(function(){\' . implode(\\"\\\\n\\", $_html) . \'\\n        }, 200);\\n    });\';\\n            }\\n            if ($modx->getOption(\'admintools_alternative_permissions\', null, true) && $modx->hasPermission(\'access_permissions\')) {\\n                $modx->controller->addLastJavascript($AdminTools->getOption(\'jsUrl\') . \'mgr\\/permissions.js\');\\n                $output .= \'\\n    Ext.ComponentMgr.onAvailable(\\"modx-resource-tabs\\", function() {\\n\\t\\tthis.on(\\"beforerender\\", function() {\\n\\t\\t\\tthis.add({\\n\\t\\t\\t\\ttitle: _(\\"admintools_permissions\\"),\\n\\t\\t\\t\\tborder: false,\\n\\t\\t\\t\\titems: [{\\n\\t\\t\\t\\t\\tlayout: \\"anchor\\",\\n\\t\\t\\t\\t\\tborder: false,\\n\\t\\t\\t\\t\\titems: [{\\n\\t\\t\\t\\t\\t\\thtml: _(\\"admintools_permissions_desc\\"),\\n\\t\\t\\t\\t\\t\\tborder: false,\\n\\t\\t\\t\\t\\t\\tbodyCssClass: \\"panel-desc\\"\\n\\t\\t\\t\\t\\t}, {\\n\\t\\t\\t\\t\\t\\txtype: \\"admintools-grid-permissions\\",\\n\\t\\t\\t\\t\\t\\tanchor: \\"100%\\",\\n\\t\\t\\t\\t\\t\\tcls: \\"main-wrapper\\",\\n\\t\\t\\t\\t\\t\\tresource: \' . $id . \'\\n\\t\\t\\t\\t\\t}]\\n\\t\\t\\t\\t}]\\n\\t\\t\\t});\\n\\t\\t});\\n\\t});\\n\';\\n            }\\n            if (!empty($output)) $modx->controller->addHtml(\'<script type=\\"text\\/javascript\\">\' . $output . \'<\\/script>\');\\n            break;\\n        \\/*case \'OnWebPagePrerender\':\\n            $output = &$modx->resource->_output;\\n            $replace = \\"\\";\\n            preg_replace(\'\\/<\\/script>\\/\', $replace, $output, 1);\\n            break;*\\/\\n    }\\n}"}',
);