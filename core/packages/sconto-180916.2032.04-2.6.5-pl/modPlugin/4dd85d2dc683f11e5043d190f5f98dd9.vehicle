<?php return array (
  'preserve_keys' => true,
  'update_object' => true,
  'vehicle_package' => 'transport',
  'vehicle_class' => 'xPDOObjectVehicle',
  'guid' => '70584174cef95bd42eed2b796ce117b2',
  'package' => 'modx',
  'class' => 'modPlugin',
  'signature' => '4dd85d2dc683f11e5043d190f5f98dd9',
  'native_key' => 15,
  'object' => '{"id":15,"source":1,"property_preprocess":0,"name":"BannerYClickout","description":"Handle ad clicks","editor_type":0,"category":15,"cache_type":0,"plugincode":"if ($modx->event->name == \'OnPageNotFound\') {\\n\\t$bannery_click = $modx->getOption(\'bannery_click\', null, \'bannerclick\', true);\\n\\tif (preg_match(\'\\/\'.$bannery_click.\'\\\\\\/([0-9]+)\\/\', $_SERVER[\'REQUEST_URI\'], $matches)) {\\n\\t\\t$modx->addPackage(\'bannery\', $modx->getOption(\'core_path\') . \'components\\/bannery\\/model\\/\');\\n\\n\\t\\t$id = $matches[1];\\n\\t\\t$c = $modx->newQuery(\'byAd\');\\n\\t\\t$c->select(\'`byAd`.`id`, `Position`.`position`, `byAd`.`url`\');\\n\\t\\t$c->leftJoin(\'byAdPosition\', \'Position\', \'Position.ad = byAd.id\');\\n\\t\\t$c->where(array(\'Position.id\' => $id));\\n\\t\\tif ($ad = $modx->getObject(\'byAd\', $c)) {\\n\\t\\t\\t$key = array(\\n\\t\\t\\t\\t\'ad\' => $ad->get(\'id\'),\\n\\t\\t\\t\\t\'position\' => $ad->get(\'position\'),\\n\\t\\t\\t\\t\'ip\' => $_SERVER[\'REMOTE_ADDR\'],\\n\\t\\t\\t\\t\'clickdate:LIKE\' => date(\'Y-m-d\') . \'%\'\\n\\t\\t\\t);\\n\\t\\t\\tif (!$modx->getCount(\'byClick\', $key)) {\\n\\t\\t\\t\\t$click = $modx->newObject(\'byClick\', array(\\n\\t\\t\\t\\t\\t\'ad\' => $ad->get(\'id\'),\\n\\t\\t\\t\\t\\t\'position\' => $ad->get(\'position\'),\\n\\t\\t\\t\\t\\t\'clickdate\' => date(\'Y-m-d H:i:s\'),\\n\\t\\t\\t\\t\\t\'referrer\' => $_SERVER[\'HTTP_REFERER\'],\\n\\t\\t\\t\\t\\t\'ip\' => $_SERVER[\'REMOTE_ADDR\']\\n\\t\\t\\t\\t));\\n\\t\\t\\t\\t$click->save();\\n\\t\\t\\t}\\n\\t\\t\\t$url = $ad->get(\'url\');\\n\\t\\t\\t$chunk = $modx->newObject(\'modChunk\');\\n\\t\\t\\t$chunk->set(\'name\', \'banneryPosition\' . $id);\\n\\t\\t\\t$chunk->setContent($url);\\n\\t\\t\\t$url = $chunk->process($_GET);\\n\\n\\t\\t\\t$modx->sendRedirect($url);\\n\\t\\t}\\n\\t}\\n}","locked":0,"properties":null,"disabled":0,"moduleguid":"","static":0,"static_file":"core\\/components\\/bannery\\/elements\\/plugins\\/plugin.banneryclickout.php","content":"if ($modx->event->name == \'OnPageNotFound\') {\\n\\t$bannery_click = $modx->getOption(\'bannery_click\', null, \'bannerclick\', true);\\n\\tif (preg_match(\'\\/\'.$bannery_click.\'\\\\\\/([0-9]+)\\/\', $_SERVER[\'REQUEST_URI\'], $matches)) {\\n\\t\\t$modx->addPackage(\'bannery\', $modx->getOption(\'core_path\') . \'components\\/bannery\\/model\\/\');\\n\\n\\t\\t$id = $matches[1];\\n\\t\\t$c = $modx->newQuery(\'byAd\');\\n\\t\\t$c->select(\'`byAd`.`id`, `Position`.`position`, `byAd`.`url`\');\\n\\t\\t$c->leftJoin(\'byAdPosition\', \'Position\', \'Position.ad = byAd.id\');\\n\\t\\t$c->where(array(\'Position.id\' => $id));\\n\\t\\tif ($ad = $modx->getObject(\'byAd\', $c)) {\\n\\t\\t\\t$key = array(\\n\\t\\t\\t\\t\'ad\' => $ad->get(\'id\'),\\n\\t\\t\\t\\t\'position\' => $ad->get(\'position\'),\\n\\t\\t\\t\\t\'ip\' => $_SERVER[\'REMOTE_ADDR\'],\\n\\t\\t\\t\\t\'clickdate:LIKE\' => date(\'Y-m-d\') . \'%\'\\n\\t\\t\\t);\\n\\t\\t\\tif (!$modx->getCount(\'byClick\', $key)) {\\n\\t\\t\\t\\t$click = $modx->newObject(\'byClick\', array(\\n\\t\\t\\t\\t\\t\'ad\' => $ad->get(\'id\'),\\n\\t\\t\\t\\t\\t\'position\' => $ad->get(\'position\'),\\n\\t\\t\\t\\t\\t\'clickdate\' => date(\'Y-m-d H:i:s\'),\\n\\t\\t\\t\\t\\t\'referrer\' => $_SERVER[\'HTTP_REFERER\'],\\n\\t\\t\\t\\t\\t\'ip\' => $_SERVER[\'REMOTE_ADDR\']\\n\\t\\t\\t\\t));\\n\\t\\t\\t\\t$click->save();\\n\\t\\t\\t}\\n\\t\\t\\t$url = $ad->get(\'url\');\\n\\t\\t\\t$chunk = $modx->newObject(\'modChunk\');\\n\\t\\t\\t$chunk->set(\'name\', \'banneryPosition\' . $id);\\n\\t\\t\\t$chunk->setContent($url);\\n\\t\\t\\t$url = $chunk->process($_GET);\\n\\n\\t\\t\\t$modx->sendRedirect($url);\\n\\t\\t}\\n\\t}\\n}"}',
);